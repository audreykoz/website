<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

<dom-module id="pdf-reader">

  <template>
    <style>
      .pdf-toolbar {
        width: 100%;
        background-color: #4D4D4D;
        height: 40px;
        color: #e3e3e3;
      }

      .pdf-ul li {
        display: inline;
        line-height: 40px;
      }

      .pdf-ul {
        margin: 0;
        padding: 0 2em
      }

      .pdf-nav,
      .pdf-next-prev,
      .pdf-scale,
      .pdf-scale-down,
      .pdf-scale-up {
        display: inline
      }

      .pdf-page-nav {
        float: left;
        width: 33%;
        text-align: left
      }

      .pdf-scale {
        display: inline-block;
        width: 33%
      }

      .pdf-download {
        float: right;
        width: 33%;
        text-align: right
      }

      .pdf-page-num {
        width: 2em;
        text-align: center;
        background-color: #686868;
        border: 1px solid black;
        color: #ddd;
        border-radius: 2px;
      }

      .pdf-viewer {
        text-align: center;
        border: 1px solid #4d4d4d;
      }

      .pdf-viewport-out {
        overflow: auto;
        background-color: #fafafa;
      }

      .pdf-viewport {
        display: block;
        position: relative;
        transition: all 200ms ease-in-out;
        border: 1px solid #eeeeee;
      }

      .pdf-disabled,
      .pdf-hidden {
        color: #666666;
      }

      .pdf-zoom-lvl {
        background-color: #686868;
        border: 1px solid black;
        color: #ddd;
        border-radius: 2px;
      }

      .fa {
        font-size: 1.5em;
        cursor: pointer;
      }

    </style>

    <div class="pdf-viewer">
      <div class="pdf-toolbar">
        <ul class="pdf-ul">
          <li class="pdf-page-nav pdf-hidden">
            <div class="pdf-next-prev">
              <div class="fa fa-arrow-left pdf-nav pdf-prev pdf-disabled"></div>
              <div class="fa fa-arrow-right pdf-nav pdf-next"></div>
            </div>
            <span>Page:</span>
            <input type="text" class="pdf-page-num pdf-input-field" autocomplete="off">
            <span>of <span class="pdf-total-page"></span></span>
          </li>

          <li class="pdf-scale">
            <div class="fa fa-search-minus pdf-scale-down"></div>
            <div class="fa fa-search-plus pdf-scale-up"></div>
            <select class="pdf-zoom-lvl pdf-input-field">
              <option class="pdf-custom-zoom pdf-hidden"></option>
              <option class="pdf-fit-zoom" selected="selected" value="fit">Page Fit</option>
              <option value="width">Page Width</option>
              <option value="50">50%</option>
              <option value="75">75%</option>
              <option value="100">100%</option>
              <option value="125">125%</option>
              <option value="150">150%</option>
              <option value="200">200%</option>
            </select>
          </li>

          <li class="pdf-download">
            <div class="pdf-btn fa fa-download"></div>
          </li>

        </ul>
      </div>
      <div class="pdf-viewport-out">
        <canvas class="pdf-viewport"></canvas>
      </div>
    </div>

  </template>

  <!-- build:script inline bundle -->
  <script src="../scripts/compatibility.js"></script>
  <script src="../scripts/pdf.js"></script>
  <script src="../scripts/main.js"></script>
  <!-- /build -->


  <script>
    Polymer({
      is: 'pdf-reader',
      properties: {
        src: {
          type: String,
          notify: true,
          observer: '_srcChanged'
        },
      },
      _srcChanged: function(newValue, oldValue) {
        if (newValue != null) {
          if (this.instance == null)
            this.instance = new Polymer.Reader(this);
          else {
            this.instance.changePDFSource(newValue);
          }
        }
      },
      attributeChanged: function(attrName, oldVal, newVal) {
        this.instance.setSize(attrName, newVal);
      }
    });
  </script>

</dom-module>
