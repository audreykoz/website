<section>
<section data-menu-title="Commands" id="Commands">
<h2> Inside easyaccess </h2>
<p> (Press down arrow for more and get insight from commands) </p>
</section>


<section>
<h3> help (or ?) </h3>
<p style="font-size:0.8em"> type help {command} for more info. e.g. DESDM ~> help prefetch </p>
<pre style="font-size:0.6em"><code class='bash'>
_________
DESDB ~> help

     \‾‾‾‾‾‾\
  // / .    .\
 // /   .    _\
// /  .     / //
\\ \     . / //
 \\ \_____/ //
  \\_______//    DARK ENERGY SURVEY
   `‾‾‾‾‾‾‾´     DATA MANAGEMENT

 *General Commands* (type help <command>):
===================================================
clear  config  edit  exit  help  history  prefetch  shell


 *DB Commands*      (type help <command>):
====================================================
add_comment              find_user   mytables                show_index
describe_table           load_table  refresh_metadata_cache  user_tables
find_tables              loadsql     set_password            whoami
find_tables_with_column  myquota     show_db

 *Default Input*
===================================================
* To run SQL queries just add ; at the end of query
* To write to a file  : select ... from ... where ... ; > filename
* Supported file formats (.csv, .tab., .fits, .h5)
* To check SQL syntax : select ... from ... where ... ; < check

* To access an online tutorial type: online_tutorial
_________
DESDB ~>
</code></pre>
</section>

<section>
<h3> config  </h3>
<p style="font-size:0.8em"> e.g. to disable loading bar : DESDM ~> config loading_bar set no </p>
<pre style="font-size:0.6em"><code class='bash'>
_________
DESDB ~> config

        Change parameters from config file (config.ini). Smart autocompletion enabled

        Usage:
            - config <parameter> show : Shows current value for parameter in config file
                e.g.
            - config <parameter> set <value> : Sets parameter to given value
            - config all show: Shows all parameters and their values
            - config filepath: Prints the path to the config file

        Parameters:
            database          : Default DB to connect to
            editor            : Editor for editing sql queries, see --> help edit
            prefetch          : Number of rows prefetched by Oracle, see --> help prefetch
            histcache         : Length of the history of commands
            timeout           : Timeout for a query to be printed on the screen. Doesn't apply to output files
            nullvalue         : value to replace Null entries when writing a file (default = -9999)
            outfile_max_mb    : Max size of each fits file in MB
            max_rows          : Max number of rows to display on the screen. Doesn't apply to output files
            width             : Width of the output format on the screen
            max_columns       : Max number of columns to display on the screen. Doesn't apply to output files
            color_terminal    : yes/no toggles the color for terminal std output. Need to restart easyaccess
            loading_bar       : yes/no toggles the loading bar. Useful for background jobs
            autocommit        : yes/no toggles the autocommit for DB changes (default is yes)
</code></pre>
</section>


<section>
<ul>
<li><h4> clear (or .) </h4>
<p style="font-size:0.6em"> Clears the screen </p></li>
<li><h4> edit  </h4>
<p style="font-size:0.6em"> Opens up an editor window to write query </p></li>
<li><h4> exit (or quit, or ^D) </h4>
<p style="font-size:0.6em"> Exits easyaccess and save changes and history</p></li>
<li><h4> history </h4>
<p style="font-size:0.6em"> Prints the history of the commands prompted</p></li>
<li><h4> shell (or !{command}) </h4>
<p style="font-size:0.6em"> Access the shell, e.g. DESDM ~> shell pwd, or DESDM ~> !pwd</p></li>
<li><h4> prefetch </h4>
<p style="font-size:0.6em"> Shows, sets or sets to default the number of prefetch rows from Oracle</p></li>
</ul>
</section>

<section>
<h3> describe_table </h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> describe_table MINI_Y1A1

   Rows : 10, Avg time (rows/sec): 159.5

Description of MINI_Y1A1 commented as: '"small random subsample from Y1A1"'

          COLUMN_NAME DATA_TYPE DATA_FORMAT COMMENTS
1    COADD_OBJECTS_ID    NUMBER     22,11,0     Null
2                  RA    NUMBER      22,9,6     Null
3                 DEC    NUMBER      22,9,6     Null
4          MAG_AUTO_G    NUMBER      22,6,4     Null
5          MAG_AUTO_R    NUMBER      22,6,4     Null
6          MAG_AUTO_I    NUMBER      22,6,4     Null
7            TILENAME  VARCHAR2        12,,     Null
8   MAGERR_DETMODEL_I  VARCHAR2        30,,     Null
9             FLAGS_I    NUMBER      22,3,0     Null
10      XCORR_SFD98_G    NUMBER     22,10,6     Null

_________
DESDB ~>
</code></pre>
</section>


<section>
<h3> find_tables </h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> find_tables %Y1A1%

   Rows : 23, Avg time (rows/sec): 334.8


23 rows in 0.07 seconds

                  TABLE_NAME
1                Y1A1_RUNTAG
2               Y1A1_MOLYGON
3            Y1A1_MANGLE_RUN
4              Y1A1_FINALCUT
5          Y1A1_COADD_PHOTOZ
6                Y1A1_CCDGON
7                 Y1A1_COADD
8                Y1A1_PSF_QA
9               Y1A1_OBJECTS
10            Y1A1_COADD_SPT
11       Y1A1_MOLYGON_CCDGON
12    Y1A1_COADD_OBJECTS_D04
13              Y1A1_CATALOG
14            Y1A1_COADD_SRC
15        Y1A1_COADD_OBJECTS
16  Y1A1_COADD_OBJECTS_DFULL
17                 MINI_Y1A1
18          Y1A1_EXPOSURETAG
19             Y1A1_EXPOSURE
20       Y1A1_COADD_STRIPE82
21    Y1A1_COADD_OBJECTS_D10
22        Y1A1_FIRSTCUT_EVAL
23                Y1A1_IMAGE
</code></pre>
</section>

<section>
<h3> find_tables_with_column </h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> find_tables_with_column %TPZ%

    |            ☆ |  Press Ctrl-C to abort    Rows : 26, Avg time (rows/sec): 18.7


26 rows in 1.40 seconds

                          TABLE_NAME   COLUMN_NAME
1                   SVA1_GOLD_PHOTOZ     TPZ_ZCONF
2                   SVA1_GOLD_PHOTOZ        TPZ_ZP
3                   SVA1_GOLD_PHOTOZ     TPZ_ZPERR
4               SVA1_GOLD_PHOTOZ_PDF           TPZ
5            SVA1_GOLD_PHOTOZ_SPARSE           TPZ
6                      TPZ_SVA1_GOLD  TPZ_SG_CLASS
7                      TPZ_SVA1_GOLD     TPZ_ZCONF
8                      TPZ_SVA1_GOLD      TPZ_ZERR
9                      TPZ_SVA1_GOLD     TPZ_ZPHOT
10                 Y1A1_COADD_PHOTOZ     TPZ_ZCONF
11                 Y1A1_COADD_PHOTOZ        TPZ_ZP
12                 Y1A1_COADD_PHOTOZ     TPZ_ZPERR
13                             ZBINS     TPZ_ZVALS
14         mcarras2.SVA1_GOLD_PHOTOZ     TPZ_ZCONF
15         mcarras2.SVA1_GOLD_PHOTOZ        TPZ_ZP
16         mcarras2.SVA1_GOLD_PHOTOZ     TPZ_ZPERR
17     mcarras2.SVA1_GOLD_PHOTOZ_PDF           TPZ
18  mcarras2.SVA1_GOLD_PHOTOZ_SPARSE           TPZ
19            mcarras2.TPZ_SVA1_GOLD  TPZ_SG_CLASS
20            mcarras2.TPZ_SVA1_GOLD     TPZ_ZCONF
21            mcarras2.TPZ_SVA1_GOLD      TPZ_ZERR
22            mcarras2.TPZ_SVA1_GOLD     TPZ_ZPHOT
23        mcarras2.Y1A1_COADD_PHOTOZ     TPZ_ZCONF
24        mcarras2.Y1A1_COADD_PHOTOZ        TPZ_ZP
25        mcarras2.Y1A1_COADD_PHOTOZ     TPZ_ZPERR
26                    mcarras2.ZBINS     TPZ_ZVALS

</code></pre>
</section>


<section>
<h3> find_user, user_tables </h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> find_user sevilla

    | ☆            |  Press Ctrl-C to abort    Rows : 1, Avg time (rows/sec): 3.6


1 rows in 0.28 seconds

   USERNAME               EMAIL FIRSTNAME LASTNAME
1  nsevilla  nsevilla@gmail.com   Ignacio  Sevilla

_________
DESDB ~> user_tables nsevilla

Public tables from NSEVILLA
                          0
0             SVA1_GOLD_REP
1  Y1A1_STRIPE82_MATCHES_V1
2  Y1A1_STRIPE82_MATCHES_V2
_________
DESDB ~>
</code></pre>
</section>


<section>
<h3> whoami, myquota, mytables</h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> whoami

   Rows : 1, Avg time (rows/sec): 16.0

   USERNAME                       EMAIL FIRSTNAME LASTNAME
1  mcarras2  mcarras2@ncsa.illinois.edu    Matias     Kind

_________
DESDB ~> myquota

    |     ☆        |  Press Ctrl-C to abort    Rows : 1, Avg time (rows/sec): 1.6

  TABLESPACE_NAME  GBYTES_USED  GBYTES_LEFT
1           USERS    34.363403   215.636597

_________
DESDB ~> mytables

    |   ☆          |  Press Ctrl-C to abort    Rows : 11, Avg time (rows/sec): 22.1

List of my tables

                 TABLE_NAME
1                     ZBINS
2   SVA1_GOLD_PHOTOZ_SPARSE
3          SVA1_GOLD_PHOTOZ
4                 MINI_Y1A1
5           FGOTTENMETADATA
6         Y1A1_COADD_PHOTOZ
7               SPARSE_DICT
8                  MY_TABLE
9              SPEC_MATCHED
10     SVA1_GOLD_PHOTOZ_PDF
11            TPZ_SVA1_GOLD

_________
DESDB ~>

</code></pre>
</section>


<section>
<h3> show_db, set_password</h3>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> show_db

user: MCARRAS2
db  : DESSCI
host: LEOVIP148.NCSA.UIUC.EDU

Personal links:

   OWNER  DB_LINK  USERNAME  HOST  CREATED
No rows selected

_________
DESDB ~> set_password

Enter new password:
Re-Enter new password:
Password changed in DESSCI

Password changed in DESOPER

_________
DESDB ~>
</code></pre>
</section>

<section>
<h3> refresh_metadata_cache</h3>
<p>This refresh the cache with tables,
columns and users for autocompletion</p>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> refresh_metadata_cache
Updated 11.33 hours ago

Re-creating metadata table ...

    | ☆            |  Press Ctrl-C to abort
FGOTTENMETADATA table Created!

Loading metadata into cache...
_________
DESDB ~>
</code></pre>
</section>


<section>
<h3> show_index</h3>
<p>Describes the indices  in a TABLE as column_name, oracle_Type, date_length, comments</p>
<pre style="font-size:0.8em"><code class='typescript'>
_________
DESDB ~> show_index Y1A1_COADD_PHOTOZ

    |   ☆          |  Press Ctrl-C to abort    Rows : 1, Avg time (rows/sec): 2.3


1 rows in 0.44 seconds

          TABLE_NAME       COLUMN_NAME INDEX_TYPE      INDEX_NAME ITYP_NAME
1  Y1A1_COADD_PHOTOZ  COADD_OBJECTS_ID     NORMAL  SYS_C001624313      Null

</code></pre>
</section>

</section>
